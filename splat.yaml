name: Bomberman Hero (US)
basename: bmhero
options:
  compiler: IDO
  symbol_addrs_path: tools/symbol_addrs.txt
  target_path: baserom.z64
  basename: bmhero
  base_path: .
  ld_script_path: bmhero.ld
  platform: n64
  ld_legacy_generation: true
segments:
  - name: header
    type: header
    start: 0x00
    vram: 0
    subsegments:
    - [0x0000, header, header]
  - name: boot
    type: code
    start: 0x0040
    vram: 0xA4000040
    subsegments:
    - [0x0040, asm, boot]
    - [0x0B70, bin, bootcode_font]
  - name: text
    type: code
    bss_size: 0xE6E0
    start: 0x1000
    vram: 0x80000400
    subsegments:
    - [0x1000, hasm, entry] # bootloader
    - [0x1050, asm]
    - [0x38D0, asm]
    - [0xDD20, asm]
    - [0xEE20, c, EE20]
    - [0xEFE0, c, EFE0]
    - [0xF280, asm]
    - [0x10AB0, asm]
    - [0x12AF0, asm]
    - [0x15700, c, 15700]
    - [0x15A80, asm]
    - [0x17930, asm]
    - [0x1FAB0, asm]
    - [0x21E10, asm]
    - [0x25810, asm]
    - [0x26CE0, asm]
    - [0x2BF00, asm]
    - [0x30390, c, libultra/audio/synstartvoiceparam]
    - [0x30480, asm]
    - [0x30FF0, asm]
    - [0x31660, asm]
    - [0x316A0, asm]

    - [0x31A20, c, libultra/os/initialize]
    - [0x31CB0, c, libultra/os/createthread]
    - [0x31E00, c, libultra/os/startthread]
    - [0x31F50, c, libultra/io/pimgr]
    - [0x320E0, c, libultra/os/setthreadpri]
    - [0x321C0, hasm, libultra/os/writebackdcache]
    - [0x32240, hasm, libultra/os/invalicache]
    - [0x322C0, hasm, libultra/os/invalidcache]
    - [0x32370, c, libultra/io/pidma]
    - [0x32480, c, libultra/os/recvmesg]
    - [0x325C0, c, libultra/os/createmesgqueue]
    - [0x325F0, c, libultra/io/visetyscale]
    - [0x32650, c, libultra/io/viblack]
    - [0x326C0, c, libultra/io/vimgr]
    - [0x32A20, c, libultra/io/visetmode]
    - [0x32A90, c, libultra/os/seteventmesg]
    - [0x32B00, c, libultra/io/visetevent]
    - [0x32B70, hasm, libultra/os/setintmask]
    - [0x32C10, c, libultra/os/sendmesg]
    - [0x32D60, c, libultra/io/sptaskyielded]
    - [0x32DE0, c, libultra/io/vigetcurrframebuf]
    - [0x32E20, c, libultra/io/vigetnextframebuf]
    - [0x32E60, c, libultra/io/viswapbuf]
    - [0x32EB0, hasm, libultra/os/writebackdcacheall]
    - [0x32EE0, c, libultra/io/sptask]
    - [0x331D0, c, libultra/io/dpsetnextbuf]
    - [0x33280, c, libultra/io/sptaskyield]
    - [0x332A0, c, libultra/audio/heapinit]
    - [0x332E0, c, libultra/audio/csplayer]
    - [0x34510, c, libultra/audio/bnkf]
    - [0x34760, c, libultra/audio/cseq]
    - [0x35220, c, libultra/audio/seqpsetbank]
    - [0x35260, c, libultra/audio/seqpsetseq]
    - [0x352A0, c, libultra/audio/seqpsetvol]
    - [0x352E0, c, libultra/audio/seqpplay]
    - [0x35310, c, libultra/audio/seqpgetstate]
    - [0x35320, c, libultra/audio/seqpstop]
    - [0x35350, c, libultra/audio/seqpdelete]
    - [0x35380, c, libultra/audio/seqpsettempo]
    - [0x353F0, c, libultra/audio/cspgettempo]
    - [0x35430, c, libultra/audio/seqpgetprogram]
    - [0x354C0, c, libultra/audio/seqpgetchlvol]
    - [0x354E0, c, libultra/audio/seqpgetpan]
    - [0x35500, c, libultra/audio/seqpgetfxmix]
    - [0x35520, c, libultra/audio/cents2ratio]
    - [0x35570, c, libultra/gu/sinf]
    - [0x35730, c, libultra/audio/sndplayer]
    - [0x35E40, c, libultra/audio/sndpallocate]
    - [0x35EE0, c, libultra/audio/sndpsetpriority]
    - [0x35F10, c, libultra/audio/sndpsetsound]
    - [0x35F30, c, libultra/audio/sndpplay]
    - [0x35FA0, c, libultra/audio/sndpsetpitch]
    - [0x36000, c, libultra/audio/sndpsetvol]
    - [0x36060, c, libultra/audio/sndpsetfxmix]
    - [0x360C0, c, libultra/audio/sndpsetpan]
    - [0x36120, c, libultra/audio/sndpgetsound]
    - [0x36130, c, libultra/audio/sndpgetstate]
    - [0x36150, c, libultra/audio/sndpdeallocate]
    - [0x361A0, c, libultra/audio/sndpstop]
    - [0x361F0, c, libultra/gu/random]
    - [0x36220, c, libultra/audio/sndpdelete]
    - [0x36250, c, libultra/io/aisetfreq]
    - [0x363B0, c, libultra/audio/sl]
    - [0x36470, c, libultra/audio/heapalloc]
    - [0x364D0, c, libultra/os/virtualtophysical]
    - [0x36550, c, libultra/io/aisetnextbuf]
    - [0x36600, c, libultra/io/aigetlen]
    - [0x36610, c, libultra/audio/synthesizer]
    - [0x36CF0, c, libultra/gu/mtxutil]
    - [0x36F60, c, libultra/gu/mtxcatf]
    - [0x37170, c, libultra/gu/cosf]
    - [0x372E0, hasm, libultra/gu/sqrtf]
    - [0x372F0, c, libultra/libc/llcvt]
    - [0x37500, c, libultra/libc/ll]
    - [0x377C0, c, libultra/libc/sprintf]
    - [0x37840, c, libultra/gu/perspective]
    - [0x37AD0, c, libultra/gu/lookat]
    - [0x37E00, c, libultra/gu/translate]
    - [0x37EA0, c, libultra/gu/rotate]
    - [0x38090, c, libultra/gu/scale]
    - [0x38130, c, libultra/io/visetspecial]
    - [0x382F0, c, libultra/io/controller]
    - [0x386B0, c, libultra/io/contreaddata]
    - [0x38910, c, libultra/io/contquery]
    - [0x389C0, c, libultra/io/pfsinitpak]
    - [0x38C30, c, libultra/io/pfsisplug]
    - [0x38FA0, c, libultra/io/pfsfilestate]
    - [0x39290, c, libultra/io/pfsfreeblocks]
    - [0x393E0, c, libultra/io/pfsnumfiles]
    - [0x39530, c, libultra/io/pfssearchfile]
    - [0x396F0, c, libultra/io/pfsallocatefile]
    - [0x39EA0, c, libultra/io/pfsreadwritefile]
    - [0x3A3A0, c, libultra/io/pfsdeletefile]
    - [0x3A9B0, c, libultra/io/conteepprobe]
    - [0x3AA20, c, libultra/io/conteeplongwrite]
    - [0x3AB60, c, libultra/io/conteeplongread]
    - [0x3ACA0, c, libultra/io/motor]
    - [0x3B440, c, libultra/libc/string]
    - [0x3B4E0, hasm, libultra/os/setsr]
    - [0x3B4F0, hasm, libultra/os/getsr]
    - [0x3B500, hasm, libultra/os/setfpccsr]
    - [0x3B510, c, libultra/io/sirawread]
    - [0x3B560, c, libultra/io/sirawwrite]
    - [0x3B5B0, hasm, libultra/os/exceptasm]
    - [0x3BEC0, hasm, libultra/os/maptlbrdb]
    - [0x3BF20, c, libultra/io/pirawread]
    - [0x3BF80, hasm, libultra/libc/bzero]
    - [0x3C020, hasm, libultra/os/interrupt]
    - [0x3C060, c, libultra/os/thread]
    - [0x3C0A0, c, libultra/io/cartrominit]
    - [0x3C190, c, libultra/io/leodiskinit]
    - [0x3C290, c, libultra/io/piacs]
    - [0x3C350, c, libultra/os/getthreadpri]
    - [0x3C370, c, libultra/io/pirawdma]
    - [0x3C450, c, libultra/io/epirawdma]
    - [0x3C680, c, libultra/io/devmgr]
    - [0x3CB10, c, libultra/os/jammesg]
    - [0x3CC60, c, libultra/io/pigetcmdq]
    - [0x3CC90, c, libultra/io/vi]
    - [0x3CDD0, c, libultra/os/timerintr]
    - [0x3D1D0, c, libultra/io/vigetcurrcontext]
    - [0x3D1E0, c, libultra/io/viswapcontext]
    - [0x3D540, hasm, libultra/os/getcount]
    - [0x3D550, c, libultra/io/spgetstat]
    - [0x3D560, hasm, libultra/libc/bcopy]
    - [0x3D870, c, libultra/io/spsetstat]
    - [0x3D880, c, libultra/io/spsetpc]
    - [0x3D8C0, c, libultra/io/sprawdma]
    - [0x3D950, c, libultra/io/sp]
    - [0x3D980, c, libultra/io/dp]
    - [0x3D9B0, c, libultra/audio/seqplayer]
    - [0x3F2F0, c, libultra/audio/event]
    - [0x3F630, c, libultra/audio/synaddplayer]
    - [0x3F680, c, libultra/audio/synstopvoice]
    - [0x3F700, c, libultra/audio/synfreevoice]
    - [0x3F7B0, c, libultra/audio/synsetvol]
    - [0x3F850, c, libultra/audio/synsetpitch]
    - [0x3F8E0, c, libultra/audio/synallocvoice]
    - [0x3FB10, c, libultra/audio/synsetpan]
    - [0x3FBA0, c, libultra/audio/synsetfxmix]
    - [0x3FC40, c, libultra/audio/synremoveplayer]
    - [0x3FCE0, c, libultra/audio/synstartvoice]
    - [0x3FD70, c, libultra/audio/syndelete]
    - [0x3FD80, hasm, libultra/os/probetlb]
    - [0x3FE40, c, libultra/io/ai]
    - [0x3FE70, c, libultra/audio/drvrnew]
    - [0x40610, c, libultra/audio/synallocfx]
    - [0x406B0, c, libultra/audio/mainbus]
    - [0x40800, c, libultra/audio/load]
    - [0x41350, c, libultra/audio/resample]
    - [0x41650, c, libultra/audio/env]
    - [0x422B0, c, libultra/audio/auxbus]
    - [0x423C0, c, libultra/audio/save]
    - [0x42480, c, libultra/libc/xprintf]
    - [0x43140, c, libultra/gu/normalize]
    - [0x431D0, c, libultra/os/gettime]
    - [0x43260, c, libultra/os/settimer]
    - [0x43340, c, libultra/io/sirawdma]
    - [0x433F0, c, libultra/io/siacs]
    - [0x434B0, c, libultra/io/pfsgetstatus]
    - [0x435C0, c, libultra/io/contpfs]
    - [0x44320, c, libultra/io/contramread]
    - [0x446B0, c, libultra/io/pfschecker]
    - [0x45110, c, libultra/io/contramwrite]
    - [0x45490, c, libultra/io/conteepwrite]
    - [0x45970, c, libultra/io/conteepread]
    - [0x45C70, c, libultra/io/crc]
    - [0x45DF0, c, libultra/io/si]
    - [0x45E20, c, libultra/io/leointerrupt]
    - [0x466A0, c, libultra/os/destroythread]
    - [0x467A0, c, libultra/os/resetglobalintmask]
    - [0x46800, c, libultra/io/epirawwrite]
    - [0x46850, c, libultra/io/epirawread]
    - [0x468A0, c, libultra/os/setglobalintmask]
    - [0x468F0, c, libultra/os/yieldthread]
    - [0x46940, hasm, libultra/os/setcompare]
    - [0x46950, c, libultra/audio/seq]
    - [0x46F70, c, libultra/audio/synsetpriority]
    - [0x46F80, c, libultra/audio/copy]
    - [0x47000, c, libultra/audio/filter]
    - [0x47020, c, libultra/audio/reverb]
    - [0x47C70, c, libultra/libc/xlitob]
    - [0x47F10, c, libultra/libc/xldtob]
    - [0x489D0, c, libultra/libc/ldiv]

    - [0x48B60, data] # data and rodata
    - [0x4C090, .data, libultra/os/initialize]
    - [0x4C0B0, .data, libultra/io/pimgr]
    - [0x4C0E0, .data, libultra/io/vimgr]
    - [0x4C100, .data, libultra/gu/random]
    - [0x4C110, .data, libultra/audio/sl]
    - [0x4C120, .data, libultra/io/aisetnextbuf]
    - [0x4C130, .data, libultra/io/controller]
    - [0x4C140, .data, libultra/io/motor]
    - [0x4C150, data]
    - [0x4C170, .data, libultra/os/thread]
    - [0x4C190, .data, libultra/io/piacs]
    - [0x4C1A0, .data, libultra/io/vi]
    - [0x4C210, data] # this is libultra/os/timerintr, but there is a big bss issue that we cant fix
    - [0x4C220, .data, libultra/audio/drvrnew]
    - [0x4C3B0, .data, libultra/audio/env]
    - [0x4C4F0, .data, libultra/libc/xprintf]
    - [0x4C540, .data, libultra/io/siacs]
    - [0x4C550, data]
    - [0x4C640, .data, libultra/libc/xlitob]
    - [0x4C670, rodata]
    - [0x4C6A0, rodata]
    - [0x4C6C0, rodata]
    - [0x4C7B0, rodata]
    - [0x4C7F0, rodata]
    - [0x4C820, rodata]
    - [0x4C860, rodata]
    - [0x4C9B0, rodata]
    - [0x4CA40, rodata]
    - [0x4CC10, rodata]
    - [0x4CC90, .rodata, libultra/audio/csplayer]
    - [0x4CED0, .rodata, libultra/audio/cseq]
    - [0x4CEE0, .rodata, libultra/audio/cents2ratio]
    - [0x4CEF0, .rodata, libultra/gu/sinf]
    - [0x4CF40, .rodata, libultra/audio/sndplayer]
    - [0x4CF80, .rodata, libultra/audio/synthesizer]
    - [0x4CF90, .rodata, libultra/gu/cosf]
    - [0x4CFE0, .rodata, libultra/libc/llcvt]
    - [0x4CFF0, .rodata, libultra/gu/perspective]
    - [0x4D000, .rodata, libultra/gu/rotate]
    - [0x4D010, rodata]
    - [0x4D060, .rodata, libultra/io/devmgr]
    - [0x4D080, .rodata, libultra/audio/seqplayer]
    - [0x4D2C0, rodata]
    - [0x4D2D0, .rodata, libultra/audio/drvrnew]
    - [0x4D2F0, .rodata, libultra/audio/resample]
    - [0x4D330, .rodata, libultra/audio/env]
    - [0x4D390, .rodata, libultra/libc/xprintf]
    - [0x4D490, .rodata, libultra/audio/seq]
    - [0x4D4A0, .rodata, libultra/audio/reverb]
    - [0x4D4D0, .rodata, libultra/libc/xldtob]
    - [0x4D530, rodata]
    - [0x4D7E0, bin]
    - [0x4DFF0]
    
    # bss begins here I guess
    - {vram: 0x8004D3F0, type: .bss, name: bss_pad}
    - {vram: 0x80059160, type: .bss, name: libultra/io/vimgr}
    - {vram: 0x8005A380, type: .bss, name: bss_pad_2}
    - {vram: 0x8005A400, type: .bss, name: libultra/io/sptask}
    - {vram: 0x8005A440, type: .bss, name: libultra/gu/rotate}
    - {vram: 0x8005A450, type: .bss, name: libultra/io/controller}
    - {vram: 0x8005A4E0, type: .bss, name: bss_pad_3}
    - {vram: 0x8005A8A0, type: .bss, name: libultra/os/timerintr} # bss issue
  - [0x4DFF0]
    
  - [0x4DFF0, bin, rom_bin_4D7E0] # RSP is here + rest of ROM
  - [0xC00000]
